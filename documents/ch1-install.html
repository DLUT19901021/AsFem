<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"yangbai90.github.io","root":"/","scheme":"Muse","version":"7.7.2","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="WindowsFor windows users, it is recommended to download the executable file from here AsFem-Win If someone really needs to compile the source code by themselves, one can do the following steps: step-1">
<meta property="og:type" content="website">
<meta property="og:title" content="Installation">
<meta property="og:url" content="https://yangbai90.github.io/AsFem/documents/ch1-install.html">
<meta property="og:site_name" content="AsFem">
<meta property="og:description" content="WindowsFor windows users, it is recommended to download the executable file from here AsFem-Win If someone really needs to compile the source code by themselves, one can do the following steps: step-1">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2020-03-31T18:22:15.000Z">
<meta property="article:modified_time" content="2020-03-31T18:54:36.577Z">
<meta property="article:author" content="Yang Bai">
<meta property="article:tag" content="install">
<meta property="article:tag" content="asfem">
<meta property="article:tag" content="introduction">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://yangbai90.github.io/AsFem/documents/ch1-install">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>Installation | AsFem
</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">AsFem</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">A Simple Finite Element Method program</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>Home</a>

  </li>
        <li class="menu-item menu-item-document">

    <a href="/documents/" rel="section"><i class="fa fa-fw fa-book"></i>document</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i>About</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>Archives</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
  
  

          <div class="content page posts-expand">
            

    
    
    
    <div class="post-block" lang="en">
      <header class="post-header">

<h1 class="post-title" itemprop="name headline">Installation
</h1>

<div class="post-meta">
  

</div>

</header>

      
      
      
      <div class="post-body">
          <h1 id="Windows"><a href="#Windows" class="headerlink" title="Windows"></a>Windows</h1><p>For windows users, it is recommended to download the executable file from here <a href="https://github.com/yangbai90/AsFem/releases" target="_blank" rel="noopener">AsFem-Win</a></p>
<p>If someone really needs to compile the source code by themselves, one can do the following steps:</p>
<h2 id="step-1"><a href="#step-1" class="headerlink" title="step-1"></a>step-1</h2><p>Firstly, you need to install the PETSc in your windows system. In order to do this, you need to install <a href="http://www.cygwin.com/" target="_blank" rel="noopener">Cygwin</a>. Download it and double click on it, it will ask you to select the FTP server(please choose the one close to you to speed up the download rate).</p>
<p>After that, you can search the GCC, g++, python, make components (GCC/g++, make, python are required to install PETSc). After the necessary components are selected, Cygwin will download it and install them into the folder you selected. If everything is fine, you should find the ‘mintty.exe’ file in your Cygwin-install-path/bin folder.</p>
<h2 id="step-2"><a href="#step-2" class="headerlink" title="step-2"></a>step-2</h2><p>In order to let the Cygwin compiler knows that we have the msvc c/c++ compiler, please open your start-&gt;visualstudo2019-&gt;x86_64-native-compiler (whatever the name it is, just a terminal command-prompt, open it!). After the terminal is open, cd into the ‘mintty.exe’ file’s folder and run</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;usr&#x2F;bin&#x2F;bash --login</span><br></pre></td></tr></table></figure>
<p>it will open a new terminal (named by Cygwin maybe), now both the win32fe compiler and GCC compiler are ready for the next step. Remember, in the following steps, you should do all the compilation stuff in this new terminal!!!</p>
<h2 id="step-3"><a href="#step-3" class="headerlink" title="step-3"></a>step-3</h2><p>Now we can do the installation for PETSc in windows since your new terminal is a Linux-type terminal, you can download the PETSc via:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -L -O http:&#x2F;&#x2F;ftp.mcs.anl.gov&#x2F;pub&#x2F;petsc&#x2F;release-snapshots&#x2F;petsc-3.11.4.tar.gz</span><br></pre></td></tr></table></figure>
<p>or download PETSc from your favorite browser, and choose the version you like from here: <a href="https://www.mcs.anl.gov/petsc/mirror/release-snapshots/" target="_blank" rel="noopener">https://www.mcs.anl.gov/petsc/mirror/release-snapshots/</a></p>
<p>Then you can unzip it via ‘tar -xf petsc.tar.gz’ or just right-click on it and unzip it. After that, cd into the petsc folder from your new terminal, and run the configuration file like below:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">.&#x2F;configure --with-cc&#x3D;&#39;win32fe cl&#39; --with-fc&#x3D;0 --with-cxx&#x3D;&#39;win32fe cl&#39; --with-mpi&#x3D;0 \</span><br><span class="line">--download-f2cblaslapack \</span><br><span class="line">CFLAGS&#x3D;&#39;-fPIC -fopenmp -O3 -march&#x3D;native&#39; \</span><br><span class="line">CXXFLAGS&#x3D;&#39;-fPIC -fopenmp -O3 -march&#x3D;native&#39; \</span><br><span class="line">FFLAGS&#x3D;&#39;-fPIC -fopenmp -O3 -march&#x3D;native&#39; \</span><br><span class="line">FCFLAGS&#x3D;&#39;-fPIC -fopenmp &#39; \</span><br><span class="line">F90FLAGS&#x3D;&#39;-fPIC -fopenmp &#39; \</span><br><span class="line">F77FLAGS&#x3D;&#39;-fPIC -fopenmp &#39;</span><br></pre></td></tr></table></figure>
<p>after the configuration is done, it will ask you to do several ‘make xxxxxx’ steps, then you just need to copy the ‘make xxx’ command from the terminal and copy it and run it.<br>After several steps (3~4, normally it is 1) ‘make xxxx’ 2) ‘make xxx install’ 3) ‘make xxxx test’), your PETSc should be ready. By default, the petsc is installed in the same folder as your petsc source code, but it may have a different name, i.e. win-opt-arch, something like that.</p>
<h2 id="step-4"><a href="#step-4" class="headerlink" title="step-4"></a>step-4</h2><p>Now you can compile AsFem after you download the source code, you need to edit the CMakeLists.txt file in AsFem folder, please choose the windows release configuration in CMakeLists.txt file, and make sure the path to your PETSc and Eigen is correct (in windows, the path is ‘C:\Program\xxx’, however, it should be modified as ‘C:/Program/XXX’, otherwise it can not be recognized). Another important thing is, in Linux the library file is named as ‘xxx.so’. However, it is different in windows, where you should give ‘petsc.lib’ or whatever the name you see in your petsc’s lib folder.</p>
<p>After your CMakeLists.txt file is ready, open your VisualStudio2019 and open the AsFem folder, then compile it.<br>In order to run asfem, you need to put the petsc.dll file together with asfem. </p>
<h1 id="Linux"><a href="#Linux" class="headerlink" title="Linux"></a>Linux</h1><p>For Linux users, it is much simpler. All you need is the g++ compiler and one working mpi compiler. Then you can do:</p>
<h2 id="step-1-1"><a href="#step-1-1" class="headerlink" title="step-1"></a>step-1</h2><p>install the PETSc</p>
<h2 id="step-2-1"><a href="#step-2-1" class="headerlink" title="step-2"></a>step-2</h2><p>download the source code:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone https:&#x2F;&#x2F;github.com&#x2F;yangbai90&#x2F;AsFem.git</span><br></pre></td></tr></table></figure>
<p>then go to the source code folder and edit the CMakeLists.txt file, change the path of PETSc and MPI to your own one. Then you can run:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cmake CMakeLists.txt &amp;&amp; make -j8</span><br></pre></td></tr></table></figure>
<p>after the compilation is finished, the executable file ‘asfem’ should be found under the bin folder.</p>
<p>That’s all, enjoy it!</p>

      </div>
      
      
      
    </div>
    

    
    
    


          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Windows"><span class="nav-number">1.</span> <span class="nav-text">Windows</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#step-1"><span class="nav-number">1.1.</span> <span class="nav-text">step-1</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#step-2"><span class="nav-number">1.2.</span> <span class="nav-text">step-2</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#step-3"><span class="nav-number">1.3.</span> <span class="nav-text">step-3</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#step-4"><span class="nav-number">1.4.</span> <span class="nav-text">step-4</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Linux"><span class="nav-number">2.</span> <span class="nav-text">Linux</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#step-1-1"><span class="nav-number">2.1.</span> <span class="nav-text">step-1</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#step-2-1"><span class="nav-number">2.2.</span> <span class="nav-text">step-2</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Yang Bai</p>
  <div class="site-description" itemprop="description">A simple finite element method program for phase-field modeling and multiphysics modeling</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">2</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">categories</span>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">3</span>
        <span class="site-state-item-name">tags</span>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/yangbai90" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;yangbai90" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:walkandthinker@gmail.com" title="E-Mail → mailto:walkandthinker@gmail.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Yang Bai</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  
  <script>
    (function(){
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      bp.src = (curProtocol === 'https') ? 'https://zz.bdstatic.com/linksubmit/push.js' : 'http://push.zhanzhang.baidu.com/push.js';
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
    })();
  </script>




  
<script src="/js/local-search.js"></script>













  

  

  

</body>
</html>
